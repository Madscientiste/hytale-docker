services:
  hytale:
    image: ghcr.io/madscientiste/hytale-server:latest
    # Or build locally: build: .
    restart: unless-stopped
    container_name: hytale
    tty: true
    stdin_open: true
    environment:
      # Container & Permissions
      - HOST_UID=${UID:-1000}
      - HOST_GID=${GID:-1001}

      # Logging
      - LOG_LEVEL=INFO # ERROR, WARN, INFO, DEBUG

      # Server Download
      - VERSION=LATEST # Currently only LATEST is supported
      - PATCHLINE=release # Patchline/branch (typically 'release' or 'pre-release')
      - FORCE_DOWNLOAD=false # Force re-download if true

      # Server Configuration
      - SERVER_NAME=My Hytale Server # Server name displayed to players
      - MOTD=Welcome to our Hytale server! # Message of the day
      - MAX_PLAYERS=50 # Maximum number of players
      - MAX_VIEW_RADIUS=32 # Maximum view radius (chunks)
      - DEFAULT_WORLD=default # Default world name
      - DEFAULT_GAME_MODE=Adventure # Adventure or Creative
      - SERVER_PASSWORD= # Server password (empty for public)

      # JVM & Server Startup
      - INIT_MEMORY=8G # Initial Java heap size
      - MAX_MEMORY=16G # Maximum Java heap size
      - JVM_OPTS= # Additional JVM options
      - JVM_XX_OPTS= # Additional JVM -XX: options
      - BIND_ADDRESS= # IP address to bind to (empty = all interfaces)
      - TRANSPORT_TYPE= # Transport type (e.g., 'quic')
      - AUTH_MODE= # Authentication mode (e.g., 'online')

      # Backup Configuration
      - ENABLE_BACKUPS=true # Enable/disable backups (default: true)
      - BACKUP_DIR=/data/backups # Absolute path for backups (default: /data/backups)
      - BACKUP_FREQUENCY=30 # Backup interval in minutes (default: 30)
      - BACKUP_MAX_COUNT=5 # Maximum number of backups to keep (default: 5)
      # Example: Use separate volume for backups
      # - BACKUP_DIR=/backup
    volumes:
      - "./data:/data"
      # Optional: Mount separate volume for backups
      # - "./backups:/backup"
    ports:
      - "5520:5520/udp" # Hytale UDP/QUIC
